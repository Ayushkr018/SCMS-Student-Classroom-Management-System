<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assignment Management - SCMS Teacher Portal</title>
    <link rel="stylesheet" href="assignment.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar - Same as existing pages -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>ðŸŽ“ SCMS</h2>
                <p>Teacher Portal</p>
            </div>
            
            <div class="user-info">
                <div class="user-avatar">JD</div>
                <div class="user-details">
                    <div class="user-name" id="userName">Loading...</div>
                    <div class="user-dept" id="userDept">Computer Science</div>
                </div>
            </div>

            <div class="theme-toggle-sidebar" onclick="toggleTheme()">
                <div class="theme-toggle-icon">
                    <i id="themeIcon" class="fas fa-moon"></i>
                    <span id="themeLabel">Dark Mode</span>
                </div>
                <div class="theme-switch" id="themeSwitch">
                    <div class="theme-switch-handle"></div>
                </div>
            </div>

            <nav class="sidebar-nav">
                  <ul>
                    <li>
                        <a href="dashboard.html">
                            <i class="fas fa-tachometer-alt"></i>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="session.html">
                            <i class="fas fa-video"></i>
                            Live Session
                        </a>
                    </li>
                    <li>
                        <a href="attendance.html">
                            <i class="fas fa-user-check"></i>
                            Attendance
                        </a>
                    </li>
                    <li>
                        <a href="test-management.html">
                            <i class="fas fa-clipboard-check"></i>
                            Test Management
                        </a>
                    </li>
                    <li class="active">
                        <a href="assignment.html">
                            <i class="fas fa-tasks"></i>
                            Assignments
                        </a>
                    </li>
                    <li>
                        <a href="profiles.html">
                            <i class="fas fa-users"></i>
                            Student Profiles
                        </a>
                    </li>
                    <li>
                        <a href="content.html">
                            <i class="fas fa-book"></i>
                            Course Content
                        </a>
                    </li>
                     <li>
                        <a href="resources.html">
                            <i class="fas fa-tools"></i>
                            Resources
                        </a>
                    </li>
                    <li>
                        <a href="notifications.html">
                            <i class="fas fa-bell"></i>
                            Notifications
                            <span class="nav-badge" id="navNotificationBadge">3</span>
                        </a>
                    </li>
                    <li>
                        <a href="settings.html">
                            <i class="fas fa-cog"></i>
                            Settings
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </a>
                    </li>
                </ul>
                
             
                
            </nav>
        </aside>

        <!-- Mobile Header -->
        <header class="mobile-header">
            <div class="mobile-header-content">
                <div class="mobile-logo">
                    <i class="fas fa-tasks"></i>
                    <span>Assignments</span>
                </div>
                <div class="mobile-controls">
                    <button class="mobile-theme-toggle" onclick="toggleTheme()">
                        <i id="mobileThemeIcon" class="fas fa-moon"></i>
                    </button>
                    <button class="mobile-menu-btn" onclick="toggleMobileSidebar()">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeMobileSidebar()"></div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-info">
                    <h1><i class="fas fa-tasks"></i> Assignment Management</h1>
                    <p>Create, manage and grade assignments efficiently</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="openAssignmentForm()">
                        <i class="fas fa-plus"></i> New Assignment
                    </button>
                    <button class="btn btn-info" onclick="viewAllSubmissions()">
                        <i class="fas fa-folder-open"></i> All Submissions
                    </button>
                    <button class="btn btn-secondary" onclick="exportGrades()">
                        <i class="fas fa-download"></i> Export Grades
                    </button>
                </div>
            </div>

            <!-- Assignment Statistics -->
            <div class="assignment-stats">
                <div class="stat-item">
                    <span class="stat-number" id="totalAssignments">8</span>
                    <span class="stat-label">Total Assignments</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="activeAssignments">3</span>
                    <span class="stat-label">Active</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="pendingSubmissions">24</span>
                    <span class="stat-label">Pending Submissions</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="gradedSubmissions">156</span>
                    <span class="stat-label">Graded</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="avgGrade">78.5%</span>
                    <span class="stat-label">Average Grade</span>
                </div>
            </div>

            <!-- Assignment Filters -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3><i class="fas fa-filter"></i> Filter Assignments</h3>
                </div>
                <div class="assignment-filters" style="padding: 20px;">
                    <div class="filters-row">
                        <div class="filter-group">
                            <label>Status</label>
                            <select id="statusFilter" onchange="filterAssignments()">
                                <option value="all">All Status</option>
                                <option value="active">Active</option>
                                <option value="completed">Completed</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Class</label>
                            <select id="classFilter" onchange="filterAssignments()">
                                <option value="all">All Classes</option>
                                <option value="cs-2a">BTech CS - 2A</option>
                                <option value="cs-2b">BTech CS - 2B</option>
                                <option value="it-3a">BTech IT - 3A</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Due Date</label>
                            <select id="dueDateFilter" onchange="filterAssignments()">
                                <option value="all">All Dates</option>
                                <option value="overdue">Overdue</option>
                                <option value="due-today">Due Today</option>
                                <option value="due-week">Due This Week</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Search</label>
                            <input type="text" id="assignmentSearch" placeholder="Search assignments..." oninput="filterAssignments()">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Assignment List -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3><i class="fas fa-book"></i> My Assignments</h3>
                    <div class="card-actions">
                        <button class="btn btn-secondary" onclick="refreshAssignments()">
                            <i class="fas fa-sync"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="assignments-list" id="assignmentsList">
                    <!-- Dynamic content loaded via JavaScript -->
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="dashboard-card">
                <div class="card-header">
                    <h3><i class="fas fa-history"></i> Recent Activity</h3>
                </div>
                <div class="recent-activity" id="recentActivity">
                    <div class="activity-item">
                        <div class="activity-icon"><i class="fas fa-upload"></i></div>
                        <div class="activity-info">
                            <div class="activity-text">Rahul Sharma submitted "Data Structures Lab"</div>
                            <div class="activity-time">2 minutes ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon"><i class="fas fa-star"></i></div>
                        <div class="activity-info">
                            <div class="activity-text">Graded submission from Priya Patel - 9/10</div>
                            <div class="activity-time">15 minutes ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon"><i class="fas fa-plus"></i></div>
                        <div class="activity-info">
                            <div class="activity-text">Created new assignment "Algorithm Analysis"</div>
                            <div class="activity-time">1 hour ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Assignment Creation/Edit Modal -->
    <div class="modal" id="assignmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Create New Assignment</h3>
                <button class="close-btn" onclick="closeAssignmentForm()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="assignmentForm">
                    <div class="form-group">
                        <label>Assignment Title *</label>
                        <input type="text" id="assignmentTitle" placeholder="Enter assignment title" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Class/Course *</label>
                            <select id="assignmentClass" required>
                                <option value="">Select Class</option>
                                <option value="cs-2a">BTech CS - 2nd Year - Section A</option>
                                <option value="cs-2b">BTech CS - 2nd Year - Section B</option>
                                <option value="it-3a">BTech IT - 3rd Year - Section A</option>
                                <option value="mca-1">MCA - 1st Year</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Subject *</label>
                            <select id="assignmentSubject" required>
                                <option value="">Select Subject</option>
                                <option value="data-structures">Data Structures</option>
                                <option value="algorithms">Algorithms</option>
                                <option value="database">Database Management</option>
                                <option value="web-tech">Web Technology</option>
                                <option value="software-eng">Software Engineering</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Description/Instructions</label>
                        <textarea id="assignmentDescription" rows="4" placeholder="Provide detailed instructions for the assignment..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Due Date *</label>
                            <input type="datetime-local" id="assignmentDue" required>
                        </div>
                        <div class="form-group">
                            <label>Total Marks *</label>
                            <input type="number" id="assignmentMarks" min="1" max="100" value="10" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Assignment Type</label>
                            <select id="assignmentType">
                                <option value="individual">Individual</option>
                                <option value="group">Group Project</option>
                                <option value="lab">Lab Assignment</option>
                                <option value="research">Research Paper</option>
                                <option value="presentation">Presentation</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Submission Format</label>
                            <select id="submissionFormat">
                                <option value="pdf">PDF Document</option>
                                <option value="doc">Word Document</option>
                                <option value="code">Code Files</option>
                                <option value="presentation">Presentation</option>
                                <option value="any">Any Format</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Attachment (Assignment File)</label>
                        <input type="file" id="assignmentFile" accept=".pdf,.doc,.docx,.txt">
                        <small>Optional: Upload assignment instructions or reference materials</small>
                    </div>

                    <div class="assignment-settings">
                        <h4><i class="fas fa-cog"></i> Assignment Settings</h4>
                        
                        <div class="setting-item">
                            <label class="switch">
                                <input type="checkbox" id="allowLateSubmission">
                                <span class="slider"></span>
                            </label>
                            <div class="setting-info">
                                <h5>Allow Late Submissions</h5>
                                <p>Students can submit after due date with penalty</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <label class="switch">
                                <input type="checkbox" id="showGradesToStudents">
                                <span class="slider"></span>
                            </label>
                            <div class="setting-info">
                                <h5>Show Grades to Students</h5>
                                <p>Students can view their grades immediately after grading</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <label class="switch">
                                <input type="checkbox" id="enablePeerReview">
                                <span class="slider"></span>
                            </label>
                            <div class="setting-info">
                                <h5>Enable Peer Review</h5>
                                <p>Allow students to review each other's submissions</p>
                            </div>
                        </div>

                        <div class="setting-item" id="latePenaltySettings" style="display: none;">
                            <label>Late Submission Penalty (%)</label>
                            <input type="number" id="latePenalty" min="0" max="100" value="10">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" onclick="closeAssignmentForm()">Cancel</button>
                        <button type="submit" class="btn btn-primary" id="saveAssignmentBtn">
                            <i class="fas fa-save"></i> Save Assignment
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Submissions Modal -->
    <div class="modal" id="submissionsModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3 id="submissionsTitle">Assignment Submissions</h3>
                <button class="close-btn" onclick="closeSubmissionsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="submissions-stats">
                    <div class="submission-stat">
                        <span class="stat-number" id="totalStudents">45</span>
                        <span class="stat-label">Total Students</span>
                    </div>
                    <div class="submission-stat">
                        <span class="stat-number" id="submittedCount">32</span>
                        <span class="stat-label">Submitted</span>
                    </div>
                    <div class="submission-stat">
                        <span class="stat-number" id="gradedCount">28</span>
                        <span class="stat-label">Graded</span>
                    </div>
                    <div class="submission-stat">
                        <span class="stat-number" id="pendingCount">13</span>
                        <span class="stat-label">Pending</span>
                    </div>
                </div>

                <div class="submissions-table-container">
                    <table class="submissions-table">
                        <thead>
                            <tr>
                                <th>Student Name</th>
                                <th>Roll No</th>
                                <th>Submission Date</th>
                                <th>File</th>
                                <th>Grade</th>
                                <th>Feedback</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="submissionsTableBody">
                            <!-- Dynamic content -->
                        </tbody>
                    </table>
                </div>

                <div class="bulk-actions">
                    <h4>Bulk Actions</h4>
                    <div class="bulk-actions-row">
                        <button class="btn btn-info" onclick="downloadAllSubmissions()">
                            <i class="fas fa-download"></i> Download All
                        </button>
                        <button class="btn btn-warning" onclick="sendReminder()">
                            <i class="fas fa-bell"></i> Send Reminder
                        </button>
                        <button class="btn btn-success" onclick="exportGrades()">
                            <i class="fas fa-file-export"></i> Export Grades
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Grade Assignment Modal -->
    <div class="modal" id="gradeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Grade Assignment</h3>
                <button class="close-btn" onclick="closeGradeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="student-info" id="studentInfo">
                    <!-- Dynamic student information -->
                </div>
                
                <div class="form-group">
                    <label>Grade (out of <span id="totalMarks">10</span>)</label>
                    <input type="number" id="gradeInput" min="0" step="0.5">
                </div>

                <div class="form-group">
                    <label>Feedback</label>
                    <textarea id="feedbackInput" rows="4" placeholder="Provide detailed feedback..."></textarea>
                </div>

                <div class="quick-feedback">
                    <h5>Quick Feedback Templates</h5>
                    <div class="feedback-templates">
                        <button class="template-btn" onclick="insertFeedback('Excellent work! Well structured and comprehensive.')">
                            <i class="fas fa-star"></i> Excellent
                        </button>
                        <button class="template-btn" onclick="insertFeedback('Good effort, but needs improvement in implementation details.')">
                            <i class="fas fa-thumbs-up"></i> Good
                        </button>
                        <button class="template-btn" onclick="insertFeedback('Assignment meets basic requirements. Consider adding more examples.')">
                            <i class="fas fa-check"></i> Satisfactory
                        </button>
                        <button class="template-btn" onclick="insertFeedback('Needs significant improvement. Please review the requirements carefully.')">
                            <i class="fas fa-exclamation-circle"></i> Needs Work
                        </button>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeGradeModal()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="saveGrade()">
                        <i class="fas fa-save"></i> Save Grade
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="notification-icon"></i>
        <span class="notification-text"></span>
    </div>

    <script src="assignment.js"></script>
</body>
</html>
