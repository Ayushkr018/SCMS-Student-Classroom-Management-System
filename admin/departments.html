<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Department Management - College Management System</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="departments.css">
</head>
<body>
    <div class="mobile-header">
        <div class="mobile-header-content">
            <div class="mobile-logo">
                üéì <span>SCMS Departments</span>
            </div>
            <div class="mobile-controls">
                <button class="mobile-theme-toggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">
                    <i class="fas fa-moon" id="mobileThemeIcon"></i>
                </button>
                <button class="mobile-menu-btn" onclick="toggleMobileSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeMobileSidebar()"></div>

    <div class="dashboard">
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>üéì SCMS</h2>
                <p>Admin Portal</p>
            </div>
            
            <div class="user-info" id="userInfo">
                <div class="user-avatar">
                    <i class="fas fa-user-shield"></i>
                </div>
                <div class="user-details">
                    <div class="user-name" id="userName">Loading...</div>
                    <div class="user-role">Administrator</div>
                </div>
            </div>
            
            <div class="theme-toggle-sidebar" onclick="toggleTheme()">
                <div class="theme-toggle-icon">
                    <i class="fas fa-moon" id="themeIcon"></i>
                    <span id="themeLabel">Dark Mode</span>
                </div>
                <div class="theme-switch" id="themeSwitch">
                    <div class="theme-switch-handle"></div>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="dashboard.html">
                            <i class="fas fa-tachometer-alt"></i>
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a href="users.html">
                            <i class="fas fa-chalkboard-teacher"></i>
                            Class Management
                        </a>
                    </li>
                    <li>
                        <a href="students.html">
                            <i class="fas fa-user-graduate"></i>
                            Students
                        </a>
                    </li>
                    <li>
                        <a href="teachers.html">
                            <i class="fas fa-user-tie"></i>
                            Faculty
                        </a>
                    </li>
                    <li class = "active">
                        <a href="departments.html">
                            <i class="fas fa-building"></i>
                            Departments
                        </a>
                    </li>
                    <li>
                        <a href="labs.html">
                            <i class="fas fa-flask"></i>
                            Lab Management
                        </a>
                    </li>
                     <li>
                        <a href="feedback.html">
                            <i class="fas fa-comment-dots"></i>
                            Feedback & Complaints
                        </a>
                    </li>
                    <li>
                        <a href="reports.html">
                            <i class="fas fa-chart-bar"></i>
                            Reports & Analytics
                        </a>
                    </li>
                    <li>
                        <a href="settings.html">
                            <i class="fas fa-cog"></i>
                            System Settings
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        
        <div class="main-content">
            <div class="header">
                <div>
                    <h1>üèõÔ∏è Department Management</h1>
                    <p>Manage academic departments and programs</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-success" onclick="openAddDepartmentModal()">
                        <i class="fas fa-plus"></i>
                        Add Department
                    </button>
                    <button class="btn btn-primary" onclick="openLabManagementModal()">
                        <i class="fas fa-flask"></i>
                        Manage Labs
                    </button>
                    <button class="btn btn-warning" onclick="importDepartments()">
                        <i class="fas fa-upload"></i>
                        Import Data
                    </button>
                    <button class="btn btn-secondary" onclick="exportDepartments()">
                        <i class="fas fa-download"></i>
                        Export Data
                    </button>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card total">
                    <div class="stat-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalDepartments">12</div>
                        <div class="stat-label">Total Departments</div>
                        <div class="stat-change">+2 from last month</div>
                    </div>
                </div>
                
                <div class="stat-card active">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="activeDepartments">10</div>
                        <div class="stat-label">Active Departments</div>
                        <div class="stat-change">83% active</div>
                    </div>
                </div>
                
                <div class="stat-card faculty">
                    <div class="stat-icon">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalFaculty">145</div>
                        <div class="stat-label">Total Faculty</div>
                        <div class="stat-change">Across all depts</div>
                    </div>
                </div>
                
                <div class="stat-card students">
                    <div class="stat-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalStudents">2,450</div>
                        <div class="stat-label">Total Students</div>
                        <div class="stat-change">Enrolled students</div>
                    </div>
                </div>
            </div>

            <!-- New Lab Statistics Row -->
           
            <div class="filters-section">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="Search departments, labs, faculty..." 
                           id="searchInput" onkeyup="searchDepartments()">
                    <i class="fas fa-search search-icon"></i>
                </div>
                
                <select class="filter-select" id="statusFilter" onchange="filterDepartments()">
                    <option value="">All Status</option>
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                    <option value="under-review">Under Review</option>
                </select>
                
                <select class="filter-select" id="typeFilter" onchange="filterDepartments()">
                    <option value="">All Types</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Science">Science</option>
                    <option value="Arts">Arts</option>
                    <option value="Commerce">Commerce</option>
                    <option value="Medical">Medical</option>
                    <option value="Management">Management</option>
                </select>

                <!-- New Lab Filter -->
                <select class="filter-select" id="labFilter" onchange="filterDepartments()">
                    <option value="">All Labs</option>
                    <option value="has-labs">With Labs</option>
                    <option value="no-labs">No Labs</option>
                    <option value="high-utilization">High Utilization (>80%)</option>
                    <option value="low-utilization">Low Utilization (<60%)</option>
                </select>
            </div>

            <div class="bulk-actions" id="bulkActions">
                <input type="checkbox" id="selectAll" onchange="toggleSelectAll()">
                <span class="selected-count" id="selectedCount">0 departments selected</span>
                <button class="btn btn-warning btn-sm" onclick="bulkAction('activate')">
                    <i class="fas fa-check"></i>
                    Activate
                </button>
                <button class="btn btn-danger btn-sm" onclick="bulkAction('deactivate')">
                    <i class="fas fa-ban"></i>
                    Deactivate
                </button>
                <button class="btn btn-primary btn-sm" onclick="exportSelected()">
                    <i class="fas fa-download"></i>
                    Export Selected
                </button>
            </div>

            <div class="departments-section">
                <div class="table-header">
                    <h3><i class="fas fa-building"></i> Department Directory</h3>
                    <div class="view-controls">
                        <button class="btn btn-sm" id="cardViewBtn" onclick="switchView('card')" title="Card View">
                            <i class="fas fa-th-large"></i>
                        </button>
                        <button class="btn btn-sm active" id="tableViewBtn" onclick="switchView('table')" title="Table View">
                            <i class="fas fa-table"></i>
                        </button>
                        <button class="btn btn-primary btn-sm" onclick="refreshDepartments()">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                </div>

                <div class="departments-container" id="departmentsContainer" style="display: none;">
                </div>

                <div class="table-container" id="tableContainer">
                    <table>
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="masterCheckbox" onchange="toggleMasterCheckbox()"></th>
                                <th>Department Info</th>
                                <th>Head of Department</th>
                                <th>Faculty Count</th>
                                <th>Student Count</th>
                                <th>Lab Facilities</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="departmentsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Department Modal -->
    <div class="modal" id="departmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Add New Department</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="departmentForm" onsubmit="saveDepartment(event)">
                <div class="form-section">
                    <h4><i class="fas fa-building"></i> Department Information</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Department Name *</label>
                            <input type="text" id="departmentName" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Department Code *</label>
                            <input type="text" id="departmentCode" required placeholder="e.g., CSE">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Department Type *</label>
                            <select id="departmentType" required>
                                <option value="">Select Type</option>
                                <option value="Engineering">Engineering</option>
                                <option value="Science">Science</option>
                                <option value="Arts">Arts</option>
                                <option value="Commerce">Commerce</option>
                                <option value="Medical">Medical</option>
                                <option value="Management">Management</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Established Year</label>
                            <input type="number" id="establishedYear" min="1900" max="2030" placeholder="2020">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="departmentDescription" rows="3" placeholder="Department description and objectives"></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h4><i class="fas fa-user-tie"></i> Leadership & Contact</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Head of Department</label>
                            <input type="text" id="hodName" placeholder="Dr. John Smith">
                        </div>
                        
                        <div class="form-group">
                            <label>HOD Email</label>
                            <input type="email" id="hodEmail" placeholder="hod@department.edu">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Department Phone</label>
                            <input type="tel" id="departmentPhone" placeholder="+91-98765-43210">
                        </div>
                        
                        <div class="form-group">
                            <label>Department Email</label>
                            <input type="email" id="departmentEmail" placeholder="info@department.edu">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Office Location</label>
                        <input type="text" id="officeLocation" placeholder="Building A, Floor 2, Room 201">
                    </div>
                </div>

                <div class="form-section">
                    <h4><i class="fas fa-chart-bar"></i> Department Statistics</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Faculty Count</label>
                            <input type="number" id="facultyCount" min="0" placeholder="25">
                        </div>
                        
                        <div class="form-group">
                            <label>Student Capacity</label>
                            <input type="number" id="studentCapacity" min="0" placeholder="500">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Current Students</label>
                            <input type="number" id="currentStudents" min="0" placeholder="450">
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <select id="departmentStatus">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="under-review">Under Review</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Save Department
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Lab Management Modal -->
    <div class="modal" id="labManagementModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3><i class="fas fa-flask"></i> Laboratory Management</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="lab-management-content">
                <div class="lab-management-header">
                    <div class="lab-search">
                        <input type="text" placeholder="Search labs..." id="labSearchInput" onkeyup="searchLabs()">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="lab-filters">
                        <select id="labDepartmentFilter" onchange="filterLabsByDepartment()">
                            <option value="">All Departments</option>
                        </select>
                        <select id="labTypeFilter" onchange="filterLabsByType()">
                            <option value="">All Lab Types</option>
                            <option value="Computer Lab">Computer Lab</option>
                            <option value="Electronics Lab">Electronics Lab</option>
                            <option value="Workshop Lab">Workshop Lab</option>
                            <option value="Research Lab">Research Lab</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="openAddLabModal()">
                        <i class="fas fa-plus"></i>
                        Add Lab
                    </button>
                </div>
                <div class="labs-grid" id="labsGrid">
                    <!-- Lab cards will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add Lab Modal -->
    <div class="modal" id="addLabModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="labModalTitle">Add New Laboratory</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="labForm" onsubmit="saveLab(event)">
                <div class="form-section">
                    <h4><i class="fas fa-flask"></i> Laboratory Information</h4>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Lab Name *</label>
                            <input type="text" id="labName" required placeholder="Programming Lab">
                        </div>
                        
                        <div class="form-group">
                            <label>Lab Type *</label>
                            <select id="labType" required>
                                <option value="">Select Lab Type</option>
                                <option value="Computer Lab">Computer Lab</option>
                                <option value="Electronics Lab">Electronics Lab</option>
                                <option value="Workshop Lab">Workshop Lab</option>
                                <option value="Chemistry Lab">Chemistry Lab</option>
                                <option value="Physics Lab">Physics Lab</option>
                                <option value="Research Lab">Research Lab</option>
                                <option value="Language Lab">Language Lab</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Department *</label>
                            <select id="labDepartment" required>
                                <option value="">Select Department</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Capacity *</label>
                            <input type="number" id="labCapacity" required min="1" placeholder="30">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Lab In-charge</label>
                            <input type="text" id="labIncharge" placeholder="Prof. Smith">
                        </div>
                        
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="labLocation" placeholder="Block A, Ground Floor">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Equipment (one per line)</label>
                        <textarea id="labEquipment" rows="4" placeholder="Desktop PCs&#10;Projector&#10;Whiteboard&#10;Air Conditioning"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Software (one per line)</label>
                        <textarea id="labSoftware" rows="3" placeholder="Visual Studio&#10;MySQL&#10;Eclipse"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Utilization Rate (%)</label>
                            <input type="number" id="utilizationRate" min="0" max="100" placeholder="85">
                        </div>
                        
                        <div class="form-group">
                            <label>Status</label>
                            <select id="labStatus">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="maintenance">Under Maintenance</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Save Laboratory
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Department Details Modal -->
    <div class="modal" id="departmentDetailsModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 id="departmentDetailsTitle">Department Details</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="departmentDetailsContent">
            </div>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationText">Success message</span>
    </div>

    <script src="departments.js"></script>
</body>
</html>


